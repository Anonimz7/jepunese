  /* Menggunakan font lokal Poppins */
  @font-face {
    font-family: 'Poppins';
    src: url('fonts/poppins/Poppins-Thin.ttf') format('truetype');
    font-weight: 100;
    font-style: normal;
  }

  @font-face {
    font-family: 'Poppins';
    src: url('fonts/poppins/Poppins-ThinItalic.ttf') format('truetype');
    font-weight: 100;
    font-style: italic;
  }

  @font-face {
    font-family: 'Poppins';
    src: url('fonts/poppins/Poppins-ExtraLight.ttf') format('truetype');
    font-weight: 200;
    font-style: normal;
  }

  @font-face {
    font-family: 'Poppins';
    src: url('fonts/poppins/Poppins-ExtraLightItalic.ttf') format('truetype');
    font-weight: 200;
    font-style: italic;
  }

  @font-face {
    font-family: 'Poppins';
    src: url('fonts/poppins/Poppins-Light.ttf') format('truetype');
    font-weight: 300;
    font-style: normal;
  }

  @font-face {
    font-family: 'Poppins';
    src: url('fonts/poppins/Poppins-LightItalic.ttf') format('truetype');
    font-weight: 300;
    font-style: italic;
  }

  @font-face {
    font-family: 'Poppins';
    src: url('fonts/poppins/Poppins-Regular.ttf') format('truetype');
    font-weight: normal; /* 400 */
    font-style: normal;
  }

   @font-face {
    font-family: 'Poppins';
    src: url('fonts/poppins/Poppins-Italic.ttf') format('truetype');
    font-weight: normal; /* 400 */
    font-style: italic;
  }

  @font-face {
    font-family: 'Poppins';
    src: url('fonts/poppins/Poppins-Medium.ttf') format('truetype');
    font-weight: 500;
    font-style: normal;
  }

   @font-face {
    font-family: 'Poppins';
    src: url('fonts/poppins/Poppins-MediumItalic.ttf') format('truetype');
    font-weight: 500;
    font-style: italic;
  }

  @font-face {
    font-family: 'Poppins';
    src: url('fonts/poppins/Poppins-SemiBold.ttf') format('truetype');
    font-weight: 600;
    font-style: normal;
  }

   @font-face {
    font-family: 'Poppins';
    src: url('fonts/poppins/Poppins-SemiBoldItalic.ttf') format('truetype');
    font-weight: 600;
    font-style: italic;
  }

  @font-face {
    font-family: 'Poppins';
    src: url('fonts/poppins/Poppins-Bold.ttf') format('truetype');
    font-weight: bold; /* 700 */
    font-style: normal;
  }

   @font-face {
    font-family: 'Poppins';
    src: url('fonts/poppins/Poppins-BoldItalic.ttf') format('truetype');
    font-weight: bold; /* 700 */
    font-style: italic;
  }

   @font-face {
    font-family: 'Poppins';
    src: url('fonts/poppins/Poppins-ExtraBold.ttf') format('truetype');
    font-weight: 800;
    font-style: normal;
  }

   @font-face {
    font-family: 'Poppins';
    src: url('fonts/poppins/Poppins-ExtraBoldItalic.ttf') format('truetype');
    font-weight: 800;
    font-style: italic;
  }

   @font-face {
    font-family: 'Poppins';
    src: url('fonts/poppins/Poppins-Black.ttf') format('truetype');
    font-weight: 900;
    font-style: normal;
  }

   @font-face {
    font-family: 'Poppins';
    src: url('fonts/poppins/Poppins-BlackItalic.ttf') format('truetype');
    font-weight: 900;
    font-style: italic;
  }

  /* Menambahkan font lokal Noto Sans JP */
  /* Asumsi file font Noto Sans JP berada di folder 'fonts/notosansjp/' */
  @font-face {
    font-family: 'Noto Sans JP';
    src: url('fonts/notosansjp/NotoSansJP-Thin.ttf') format('truetype');
    font-weight: 100;
    font-style: normal;
  }

  @font-face {
    font-family: 'Noto Sans JP';
    src: url('fonts/notosansjp/NotoSansJP-ExtraLight.ttf') format('truetype');
    font-weight: 200;
    font-style: normal;
  }

  @font-face {
    font-family: 'Noto Sans JP';
    src: url('fonts/notosansjp/NotoSansJP-Light.ttf') format('truetype');
    font-weight: 300;
    font-style: normal;
  }

  @font-face {
    font-family: 'Noto Sans JP';
    src: url('fonts/notosansjp/NotoSansJP-Regular.ttf') format('truetype');
    font-weight: normal; /* 400 */
    font-style: normal;
  }

  @font-face {
    font-family: 'Noto Sans JP';
    src: url('fonts/notosansjp/NotoSansJP-Medium.ttf') format('truetype');
    font-weight: 500;
    font-style: normal;
  }

   @font-face {
    font-family: 'Noto Sans JP';
    src: url('fonts/notosansjp/NotoSansJP-SemiBold.ttf') format('truetype');
    font-weight: 600;
    font-style: normal;
  }

   @font-face {
    font-family: 'Noto Sans JP';
    src: url('fonts/notosansjp/NotoSansJP-Bold.ttf') format('truetype');
    font-weight: bold; /* 700 */
    font-style: normal;
  }

   @font-face {
    font-family: 'Noto Sans JP';
    src: url('fonts/notosansjp/NotoSansJP-ExtraBold.ttf') format('truetype');
    font-weight: 800;
    font-style: normal;
  }

   @font-face {
    font-family: 'Noto Sans JP';
    src: url('fonts/notosansjp/NotoSansJP-Black.ttf') format('truetype');
    font-weight: 900;
    font-style: normal;
  }


  /* Root Variables */
  :root {
   --primary: #4f46e5;
   --secondary: #fbbf24;
   --bg: #f8fafc;
   --text: #1e293b;
   --card-bg: #ffffff;
   --border: #e2e8f0;
  }

  [data-theme="dark"] {
   --primary: #818cf8;
   --secondary: #f59e0b;
   --bg: #1e293b;
   --text: #f8fafc;
   --card-bg: #334155;
   --border: #475569;
  }

  /* Global Styles */
  * {
   margin: 0;
   padding: 0;
   box-sizing: border-box;
   /* Hapus font-family dari * agar diwarisi dari body */
   /* font-family: 'Poppins', sans-serif; */
   transition: background 0.3s, color 0.1s;
  }

  body {
   background: var(--bg);
   color: var(--text);
   padding: 20px;
   min-height: 100vh;
   /* Update font stack: Poppins (Latin) -> Noto Sans JP (Japanese) -> Fallbacks */
   font-family: 'Poppins', 'Noto Sans JP';
  }

  /* Header */
  header {
   text-align: center;
   margin-bottom: 30px;
   position: relative;
  }

  h1 {
   color: var(--primary);
   font-weight: 600;
   margin-bottom: 10px;
  }

  /* Controls */
  .controls {
   max-width: 1000px;
   margin: 0 auto 20px;
   display: flex;
   flex-wrap: wrap;
   gap: 15px;
   align-items: center;
   justify-content: center;
  }

  .level-selector {
   display: flex;
   gap: 5px;
   background: var(--card-bg);
   padding: 5px;
   border-radius: 8px;
   border: 1px solid var(--border);
  }

  .level-btn {
   padding: 8px 15px;
   border: none;
   border-radius: 5px;
   cursor: pointer;
   font-weight: 500;
   background: transparent;
   color: var(--text);
  }

  .level-btn.active {
   background: var(--primary);
   color: white;
  }

  #searchInput {
 flex: 1 0 250px; /* Mengubah flex shorthand: grow=1, shrink=0, basis=250px */
 min-width: 200px; /* Tetap pertahankan min-width */
 padding: 12px;
 background: var(--card-bg); color: var(--text);
 border: 2px solid var(--border); border-radius: 8px; font-size: 1rem; outline: none;
}

  /* Pagination Controls (Dipindahkan ke bawah) */
  .pagination-controls {
   display: flex;
   gap: 10px;
   align-items: center;
   justify-content: center; /* Tengahkan kontrol paginasi */
   margin-top: 30px; /* Tambahkan jarak di atas paginasi */
   margin-bottom: 20px; /* Tambahkan jarak di bawah paginasi jika diperlukan */
  }


  select, button {
   padding: 10px 15px;
   background: var(--card-bg);
   color: var(--text);
   border: 2px solid var(--border);
   border-radius: 8px;
   cursor: pointer;
  }

  button:disabled {
   opacity: 0.5;
   cursor: not-allowed;
  }

  /* Status & Message */
  .status {
   text-align: center;
   margin: 20px 0;
   color: var(--primary);
  }

  .message {
   text-align: center;
   grid-column: 1 / -1;
   padding: 20px;
   color: var(--text);
  }

  /* Theme Toggle */
  .theme-toggle {
   position: fixed;
   top: 20px;
   right: 20px;
   background: var(--card-bg);
   border: 2px solid var(--border);
   border-radius: 50%;
   width: 40px;
   height: 40px;
   display: flex;
   align-items: center;
   justify-content: center;
   cursor: pointer;
   z-index: 100;
   box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  }

  .theme-toggle i {
   font-size: 1.2rem;
   color: var(--text);
  }

  #categoryFilter {
   min-width: 180px;
   background: var(--card-bg);
   color: var(--text);
   border: 2px solid var(--border);
   border-radius: 8px;
   font-size: 1rem;
   outline: none;
   appearance: none;
   cursor: pointer;
   padding: 10px 15px;
  }

  #categoryFilter:disabled {
   opacity: 0.6;
   cursor: not-allowed;
  }

  /* Tambahan untuk memberi panah custom di dropdown */
  #categoryFilter {
   background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20width%3D'14'%20height%3D'10'%20viewBox%3D'0%200%2014%2010'%20xmlns%3D'http%3A//www.w3.org/2000/svg'%3E%3Cpath%20d%3D'M1%201l6%206%206-6'%20stroke%3D'%23666'%20stroke-width%3D'2'%20fill%3D'none'%20fill-rule%3D'evenodd'/%3E%3C/svg%3E");
   background-repeat: no-repeat;
   background-position: right 12px center;
   background-size: 12px;
   padding-right: 35px;
  }

  .display-toggle {
 display: flex;
 align-items: center;
 gap: 10px;
 background: var(--card-bg);
 padding: 8px 12px;
 border-radius: 8px;
 border: 1px solid var(--border);
 /* margin-left: auto; */
 flex-shrink: 0; /* Tambahkan ini agar display toggle tidak menyusut */
}

/* Juga periksa media query untuk controls jika ada */
@media (max-width: 768px) {
 .controls {
  flex-direction: column; /* Tetap tumpuk di layar kecil */
  align-items: stretch; /* Agar item melebar */
 }
 /* Mungkin perlu atur ulang flex pada #searchInput di media query */
 #searchInput {
  width: 100%; /* Pastikan lebar 100% di mode kolom */
  flex: 1 0 auto; /* Reset flex di mode kolom jika perlu */
 }

 .display-toggle, #categoryFilter {
  width: 100%; /* Agar elemen ini juga melebar di mode kolom */
  justify-content: center; /* Tengahkan konten di dalamnya jika melebar */
 }
  /* Stack pagination items vertically on small screens */
 .pagination-controls { flex-direction: column; gap: 15px;}
}

  .display-toggle-btn {
   background: transparent;
   border: none;
   color: var(--text);
   cursor: pointer;
   font-weight: 500;
   padding: 6px 10px;
   border-radius: 4px;
   transition: all 0.2s;
  }

  .display-toggle-btn.active {
   background: var(--primary);
   color: white;
  }


  /* Grid Layout */
  .kanji-grid {
   display: grid;
   grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
   gap: 15px;
   max-width: 1000px;
   margin: 0 auto;
  }

  /* Card Style */
  .kanji-card {
   background: var(--card-bg);
   border: 1px solid var(--border);
   border-radius: 12px;
   padding: 24px 16px;
   box-shadow: 0 2px 4px rgba(0, 0, 0, 0.02);
   text-align: center;
   cursor: pointer;
   overflow: hidden;
   transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
   position: relative;
   will-change: transform;
  }

  .kanji-card:hover {
   transform: translateY(-4px);
   box-shadow: 0 6px 16px rgba(0, 0, 0, 0.08);
   border-color: rgba(79, 70, 229, 0.2);
  }

  .kanji-card::after {
   content: "";
   position: absolute;
   inset: 0;
   background: radial-gradient(circle at 20% 80%, rgba(79, 70, 229, 0.03), transparent 60%);
   opacity: 0;
   transition: opacity 0.3s ease;
   pointer-events: none;
  }

  .kanji-card:hover::after {
   opacity: 1;
  }

  /* Kanji Content Base Styles */
  .kanji, .furigana, .romaji, .meaning {
   transition: all 0.3s ease;
   /* Default state (might be hidden or styled differently based on parent .kanji-grid class) */
  }

  .kanji {
   font-size: 2.6rem;
   font-weight: 600;
   margin-bottom: 16px;
   color: var(--primary);
   line-height: 1;
  }

  .furigana {
   font-size: 0.85rem;
   font-weight: 500;
   letter-spacing: 0.5px;
   color: var(--primary);
   margin-bottom: 4px;
  }

  .romaji {
   font-size: 0.75rem;
   font-style: italic;
   color: #888;
   margin-bottom: 8px;
  }

  .meaning {
   font-size: 0.85rem;
   font-weight: 400;
   color: var(--text);
   line-height: 1.5;
  }

  .meaning .indo {
   color: #ff6b6b;
   margin-top: 2px;
  }

  .meaning .inggris {
   color: #4d96ff;
   margin-top: 2px;
  }

  /* Responsive Card Styles */
  @media (max-width: 768px) {
   .kanji-grid {
    grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
   }
   .kanji-card {
    padding: 15px;
   }
   .kanji {
    font-size: 2rem;
   }
   .furigana, .romaji, .meaning {
    font-size: 0.8rem;
   }
  }


  /* --- Minimal Mode Styles (Tidak Berubah) --- */
  .kanji-grid.display-minimal .kanji-card {
   height: 160px; /* Sesuaikan tinggi card di mode minimal */
   display: flex; /* Gunakan flexbox untuk menengahkan kanji+furigana */
   flex-direction: column;
   justify-content: center;
   align-items: center;
   padding: 10px; /* Padding disesuaikan */
  }

  /* Sembunyikan detail tambahan di mode minimal */
  .kanji-grid.display-minimal .kanji-card .romaji,
  .kanji-grid.display-minimal .kanji-card .meaning {
   display: none; /* Sembunyikan elemen sepenuhnya */
  }

  /* Atur posisi kanji dan furigana di mode minimal */
  .kanji-grid.display-minimal .kanji-card .kanji {
   margin-bottom: 5px; /* Atur jarak antara kanji dan furigana */
   font-size: 2.6rem; /* Ukuran kanji tetap besar */
   transition: none; /* Hapus transisi saat hover */
  }

  .kanji-grid.display-minimal .kanji-card .furigana {
   display: block; /* Pastikan furigana ditampilkan */
   opacity: 1; /* Pastikan furigana terlihat */
   transform: none; /* Hapus transform */
   margin-bottom: 0;
   font-size: 0.9rem; /* Sesuaikan ukuran furigana jika perlu */
   text-align: center;
   transition: none; /* Hapus transisi saat hover */
  }

  /* Hapus atau sesuaikan efek hover di mode minimal */
  .kanji-grid.display-minimal .kanji-card:hover .kanji,
  .kanji-grid.display-minimal .kanji-card:hover .furigana {
   transform: none; /* Hapus transform saat hover */
   opacity: 1;
  }
  .kanji-grid.display-minimal .kanji-card:hover .romaji,
  .kanji-grid.display-minimal .kanji-card:hover .meaning {
   display: none; /* Pastikan tetap tersembunyi saat hover di mode minimal */
  }


  /* --- Full Mode Styles (Tidak Berubah) --- */
  .kanji-grid.display-full .kanji-card {
   min-height: auto;
   padding: 24px 16px; /* Kembalikan padding default */
   display: block; /* Kembalikan display block */
  }

  /* Pastikan semua detail terlihat di mode lengkap */
  .kanji-grid.display-full .kanji-card .kanji {
   margin-bottom: 16px; /* Kembalikan margin default */
   position: static;
   transform: none;
   transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1); /* Tambahkan kembali transisi hover jika diinginkan */
  }

  .kanji-grid.display-full .kanji-card .furigana,
  .kanji-grid.display-full .kanji-card .romaji,
  .kanji-grid.display-full .kanji-card .meaning {
   display: block; /* Pastikan elemen ditampilkan */
   opacity: 1;
   transform: translateY(0);
   height: auto;
   overflow: visible;
   transition: all 0.3s ease; /* Tambahkan kembali transisi hover jika diinginkan */
  }

  /* Efek hover di mode lengkap */
  .kanji-grid.display-full .kanji-card:hover .kanji {
   transform: scale(1.05); /* Contoh: tetap perbesar kanji saat hover */
  }


  /* --- Styles untuk Modal Flashcard (Tidak Berubah) --- */
  .kanji-modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0, 0, 0, 0.6); backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); justify-content: center; align-items: center; animation: fadeIn 0.3s ease-out; }
  .kanji-modal.visible { display: flex; }
  .modal-content { background: var(--card-bg); color: var(--text); margin: auto; padding: 30px; border-radius: 15px; border: 2px solid var(--border); max-width: 500px; width: 90%; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2); position: relative; animation: scaleUp 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94); display: flex; flex-direction: column; gap: 15px; }
  .close-button { color: #aaa; position: absolute; top: 15px; right: 25px; font-size: 28px; font-weight: bold; cursor: pointer; transition: color 0.3s ease; }
  .close-button:hover, .close-button:focus { color: var(--primary); text-decoration: none; }
  .modal-kanji { font-size: 4rem; font-weight: bold; text-align: center; color: var(--primary); margin-bottom: 5px; }
  .modal-furigana { font-size: 1.2rem; text-align: center; color: var(--primary); margin-bottom: 10px; }
  .modal-romaji { font-size: 1rem; text-align: center; font-style: italic; color: #888; margin-bottom: 15px; }
  .modal-meaning { border-top: 1px solid var(--border); padding-top: 15px; text-align: center; }
  .modal-meaning div { margin-bottom: 5px; font-size: 1.1rem; }
  .modal-meaning .modal-indo { color: #ff6b6b; }
  .modal-meaning .modal-inggris { color: #4d96ff; }
  .modal-readings { border-top: 1px solid var(--border); padding-top: 15px; display: flex; justify-content: space-around; gap: 10px; }
  .modal-onyomi, .modal-kunyomi { flex: 1; }
  .modal-readings strong { display: block; margin-bottom: 5px; color: var(--primary); }
  .modal-readings ul { list-style: none; padding: 0; margin: 0; font-size: 0.95rem; }
  .modal-readings li { margin-bottom: 3px; }
  .modal-info { border-top: 1px solid var(--border); padding-top: 15px; display: flex; justify-content: space-between; font-size: 0.9rem; color: #666; }
  .modal-kategori::before { content: "Kategori: "; font-weight: 600; }
  .modal-jlpt::before { content: "JLPT: "; font-weight: 600; }

  /* Animations */
  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  @keyframes scaleUp { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }

  /* Media Query untuk Modal Responsif */
  @media (max-width: 600px) {
   .modal-content { padding: 20px; width: 95%; }
   .modal-kanji { font-size: 3rem; }
   .modal-furigana { font-size: 1rem; }
   .modal-romaji { font-size: 0.9rem; }
   .modal-meaning div { font-size: 1rem; }
   .modal-readings { flex-direction: column; gap: 15px; }
  }